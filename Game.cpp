#include "Game.h"
#include <stdio.h>
#include <iostream>

const char Game::initial_gameboard[31][28] = {{'1','2','2','2','2','2','2','2','2','2','2','2','2','3','1','2','2','2','2','2','2','2','2','2','2','2','2','3'},
											{'8','d','d','d','d','d','d','d','d','d','d','d','d','4','8','d','d','d','d','d','d','d','d','d','d','d','d','4'},
											{'8','d','1','2','2','3','d','1','2','2','2','3','d','8','4','d','1','2','2','2','3','d','1','2','2','3','d','4'},
											{'8','u','8','0','0','4','d','8','0','0','0','4','d','8','4','d','8','0','0','0','4','d','8','0','0','4','u','4'},
											{'8','d','7','6','6','5','d','7','6','6','6','5','d','7','5','d','7','6','6','6','5','d','7','6','6','5','d','4'},
											{'8','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','4'},
											{'8','d','1','2','2','3','d','1','3','d','1','2','2','2','2','2','2','3','d','3','1','d','1','2','2','3','d','4'},
											{'8','d','7','6','6','5','d','8','4','d','7','6','6','3','1','6','6','5','d','4','8','d','7','6','6','5','d','4'},
											{'8','d','d','d','d','d','d','8','4','d','d','d','d','8','4','d','d','d','d','4','8','d','d','d','d','d','d','4'},
											{'7','2','2','2','2','3','d','8','7','2','2','3','0','8','4','0','1','2','2','5','8','d','7','2','2','2','2','5'},
											{'0','0','0','0','0','4','d','8','1','6','6','5','0','7','5','0','7','6','6','3','8','d','8','0','0','0','0','0'},
											{'0','0','0','0','0','4','d','8','4','0','0','0','0','0','0','0','0','0','0','4','8','d','8','0','0','0','0','0'},
											{'0','0','0','0','0','4','d','8','4','0','1','2','2','-','-','2','2','3','0','4','8','d','8','0','0','0','0','0'},
											{'6','6','6','6','6','5','d','7','5','0','8','0','0','0','0','0','0','4','0','5','7','d','7','6','6','6','6','6'},
											{'9','0','0','0','0','0','d','0','0','0','8','0','a','c','f','s','0','4','0','0','0','d','0','0','0','0','0','9'},
											{'2','2','2','2','2','3','d','1','3','0','8','0','0','0','0','0','0','4','0','1','3','d','1','2','2','2','2','2'},
											{'0','0','0','0','0','4','d','8','4','0','7','6','6','6','6','6','6','5','0','8','4','d','8','0','0','0','0','0'},
											{'0','0','0','0','0','4','d','8','4','0','0','0','0','0','0','0','0','0','0','8','4','d','8','0','0','0','0','0'},
											{'0','0','0','0','0','4','d','8','4','0','1','2','2','2','2','2','2','3','0','8','4','d','8','0','0','0','0','0'},
											{'1','6','6','6','6','5','d','7','5','0','7','6','6','3','1','6','6','5','0','7','5','d','7','6','6','6','6','3'},
											{'8','d','d','d','d','d','d','d','d','d','d','d','d','8','4','d','d','d','d','d','d','d','d','d','d','d','d','4'},
											{'8','d','1','2','2','3','d','1','2','2','2','3','d','8','4','d','1','2','2','2','3','d','1','2','2','3','d','4'},
											{'8','d','7','6','3','4','d','7','6','6','6','5','d','7','5','d','7','6','6','6','5','d','8','1','6','5','d','4'},
											{'8','u','d','d','8','4','d','d','d','d','d','d','d','p','0','d','d','d','d','d','d','d','8','4','d','d','u','4'},
											{'7','2','3','d','8','4','d','1','3','d','1','2','2','2','2','2','2','3','d','1','3','d','8','4','d','1','6','5'},
											{'1','6','5','d','7','5','d','8','4','d','7','6','6','3','1','6','6','5','d','8','4','d','7','5','d','7','2','3'},
											{'8','d','d','d','d','d','d','8','4','d','d','d','d','8','4','d','d','d','d','8','4','d','d','d','d','d','d','4'},
											{'8','d','1','2','2','2','2','5','7','2','2','3','d','8','4','d','1','2','2','2','2','5','7','2','2','3','d','4'},
											{'8','d','7','6','6','6','6','6','6','6','6','5','d','7','5','d','7','6','6','6','6','6','6','6','6','5','d','4'},
											{'8','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','d','4'},
											{'7','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','6','5'}};

Game::Game(void)
{
	initGameboard();
	wallmanager = new Wallmanager();
	dot = new Dot();
	powerup = new Powerup();
	pacman = new Pacman();
	ambusher = new Ambusher();
	chaser = new Chaser();
	fickle = new Fickle();
	stupid = new Stupid();
}


Game::~Game(void)
{
}

void Game::draw(void)
{
	for (int i = 0; i < 31; i++)
	{
		for (int j = 0; j < 28; j++)
		{
			
			glPushMatrix();
				glTranslatef(j,i,0);
				switch (gameboard[i][j])
				{
				case 'd':
					dot->draw();
					break;
				case 'u':
					powerup->draw();
					break;
				case 'p':
					pacman->draw();
					break;
				case 'a':
					ambusher->draw();
					break;
				case 'c':
					chaser->draw();
					break;
				case 'f':
					fickle->draw();
					break;
				case 's':
					stupid->draw();
					break;
				case '0':
				case '9':
					 break;
				default:
					wallmanager->draw(gameboard[i][j]);
					break;
				}	
			glPopMatrix();
		}
		std::cout << "\n";
	}
}
void Game::update(void)
{
	pacman->update();
}
void Game::initGameboard(void)
{
	for (int i = 0; i < 31; i++)
	{
		for (int j = 0; j < 28; j++)
		{
			gameboard[i][j] = this->initial_gameboard[i][j];
		}
	}
}